var courseData = [
  {
    name: "Backend Developer in Java",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1640851375_8085.png&w=1920&q=75",
  },
  {
    name: "Backend Developer in Python",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1640851637_4621.png&w=1920&q=75",
  },
  {
    name: "Backend Developer in Node.js",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1652953799_9984.png&w=1920&q=75",
  },
  {
    name: "Backend Developer in .Net",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1652953980_7255.png&w=1920&q=75",
  },
  {
    name: "Frontend Developer in React.js",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1652954044_279.png&w=1920&q=75",
  },
  {
    name: "Frontend Developer in Angular.js",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1640853726_1126.png&w=1920&q=75",
  },
  {
    name: "Android Developer",
    price: 12999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1652954087_2845.png&w=1920&q=75",
  },
  {
    name: "CompTIA Security+ Certification Training - SY0-601",
    price: 34999,
    category: "IT",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fattachment%2Fdefault_product_image.jpg&w=1920&q=75",
  },
  {
    name: "Digital Marketing Certification Training",
    price: 19995,
    category: "Marketing",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1542800087_8980.png&w=1920&q=75",
  },
  {
    name: "Marketing Essentials",
    price: 9620,
    category: "Marketing",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1508900890_4134.png&w=1920&q=75",
  },
  {
    name: "Mastering Google Analytics",
    price: 7999,
    category: "Marketing",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1652954139_2930.png&w=1920&q=75",
  },
  {
    name: "Human Resources Management Training",
    price: 12999,
    category: "HR",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1564143982_3906.png&w=1920&q=75",
  },
  {
    name: "Certified HR Analytics Professional",
    price: 3499,
    category: "HR",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1634126540_4125.png&w=1920&q=75",
  },
  {
    name: "Management Bootcamp",
    price: 8000,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1640689215_9063.png&w=1920&q=75",
  },
  {
    name: "Certified Manager for Quality and Organisational",
    price: 11360,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1508160736_4805.png&w=1920&q=75",
  },
  {
    name: "Master of Project Management",
    price: 19999,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1617699867_4091.png&w=1920&q=75",
  },
  {
    name: "Management Fundamentals Training Course",
    price: 16499,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1579153944_2178.png&w=1920&q=75",
  },
  {
    name: "Management Fundamentals Training & Certification",
    price: 19999,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1588266994_3384.png&w=1920&q=75",
  },
  {
    name: "Advanced MS Excel 2016 Certification Training",
    price: 8475,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fattachment%2Fdefault_product_image.jpg&w=1920&q=75",
  },
  {
    name: "Business Communication Specialist",
    price: 3499,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fproduct_image%2Fimages_all%2F1508153062_3057.png&w=1920&q=75",
  },
  {
    name: "Certiication in Concrete Testing",
    price: 200,
    category: "Management",
    image:
      "https://learning.shine.com/_next/image?url=https%3A%2F%2Fstatic1.shine.com%2Fl%2Fm%2Fattachment%2Fdefault_product_image.jpg&w=1920&q=75",
  },
];

// Slider function start-----------------------
var count = 1;
setInterval(function () {
  document.getElementById("radio" + count).checked = true;
  count++;
  if (count > 6) {
    count = 1;
  }
}, 3000);
// Slider function End ------------------------

// Sticky Navbar start------------------
window.onscroll = function () {
  stickyNavbar();
};

var navbar = document.getElementById("navbar-container");
var sticky_navbar = navbar.offsetTop;

function stickyNavbar() {
  if (window.pageYOffset >= sticky_navbar) {
    navbar.classList.add("sticky_navbar");
  } else {
    navbar.classList.remove("sticky_navbar");
  }
}
// Sticky Navbar End---------------------

// Adding to cart and storing it to localStorage-----------

function emptyCart() {
  var div = document.createElement("div");
  div.setAttribute("class", "empty-cart-div");
  var image = document.createElement("img");
  image.setAttribute(
    "src",
    "https://learning.shine.com/_next/image?url=%2Fimages%2Fno-item-cart.png&w=64&q=75"
  );
  var h4 = document.createElement("h4");
  h4.textContent = "No Items in Cart";
  var para = document.createElement("p");
  para.textContent = "Keep exploring to find a course for you";
  var exploreBtn = document.createElement("a");
  exploreBtn.innerText = "Explore Now";
  exploreBtn.setAttribute("class", "cart-explore-now");
  exploreBtn.href = "viewall.html";
  exploreBtn.style.textDecoration = "none";
  div.append(image, h4, para, exploreBtn);
  document.getElementById("cart-data").append(div);

  document.getElementById("cart-total").style.display = "none";
}

var cartPageData = JSON.parse(localStorage.getItem("cart-items")) || [];

// var itemsInCart = [];
function displayProducts(datacart) {
  var totalCost = 0;
  datacart.map(function (elem, index) {
    // cart items div---------------------------

    var divMain = document.createElement("div");
    divMain.setAttribute("id", "cart-items-container");

    var divLeft = document.createElement("div");
    divLeft.setAttribute("id", "use-flex-box-here");
    // var divImage = document.createElement("div");
    var image = document.createElement("img");
    image.setAttribute("src", elem.image);
    image.setAttribute("alt", index);

    var divName = document.createElement("div");
    var h3 = document.createElement("h3");
    h3.innerText = elem.name;
    var price = document.createElement("h4");
    price.setAttribute("id", "course-price");
    price.innerText = "₹" + elem.price;

    var deleteBtn = document.createElement("button");
    deleteBtn.setAttribute("id", "remove-btn");
    deleteBtn.innerHTML =
      '<span class="material-symbols-outlined">delete</span>';

    divName.append(h3, price);
    divLeft.append(image, divName);

    divMain.append(divLeft, deleteBtn);
    document.getElementById("cart-data").append(divMain);

    totalCost += elem.price;
    document.getElementById("ak-cart-subtotal").innerText = "₹ " + totalCost;
    var sgstPrice = (totalCost * 9) / 100;
    document.getElementById("ak-sgst-price").innerText = "+ ₹ " + sgstPrice;
    var cgstPrice = (totalCost * 9) / 100;
    document.getElementById("ak-cgst-price").innerText = "+ ₹ " + cgstPrice;
    var totalPayble = totalCost + sgstPrice + cgstPrice;
    document.getElementById("ak-total-price-cart").innerText =
      "₹ " + totalPayble.toFixed(2);

    deleteBtn.addEventListener("click", function () {
      removeItem(index);
    });
    document.getElementById("order-price-total").innerText =
      "₹ " + totalPayble + " + Fees";
  });
}

var cart = document.querySelectorAll("#corseexpert");
for (let i = 0; i < cart.length; i++) {
  cart[i].addEventListener("click", function () {
    addToCart(i);
    // console.log(cart[i]);
  });
}

var cartArr = JSON.parse(localStorage.getItem("cart-items")) || [];
function addToCart(index) {
  var course = courseData.filter(function (elem, i) {
    return i == index;
  });
  // console.log();
  var flag = false;
  for (let j = 0; j < cartArr.length; j++) {
    if (cartArr[j].name === course[0].name) {
      flag = true;
    }
  }
  if (!flag) {
    cartArr.push(course[0]);
  } else {
    alert("This Course is Already Present in your Cart");
  }
  localStorage.setItem("cart-items", JSON.stringify(cartArr));
}
if (cartArr.length === 0) {
  emptyCart();
} else {
  displayProducts(cartPageData);
}

// function to remove the item from cart-------------------------------------

function removeItem(index) {
  document.getElementById("cart-data").innerText = "";
  var oldCart = JSON.parse(localStorage.getItem("cart-items")) || [];
  var removedCartItem = oldCart.filter(function (elem, i) {
    return i !== index;
  });
  localStorage.setItem("cart-items", JSON.stringify(removedCartItem));
  displayProducts(removedCartItem);
  if (removedCartItem.length === 0) {
    emptyCart();
  }
}

// ------------------Filter By category-------------------

function handlecategory() {
  var category = document.getElementById("filtercategory").value;
  var filteredlist = courseData.filter(function (elem) {
    return elem.category == category;
  });
  if (category !== "") {
    document.getElementById("viewAll-data").style.display = "none";
  } else {
    document.getElementById("viewAll-data").style.display = "block";
  }
  displayFiltereData(filteredlist);
}

function displayFiltereData(data) {
  document.getElementById("filtered-Data").innerText = "";
  data.map(function (elem, index) {
    // var popularDiv = document.createElement("div");
    // popularDiv.setAttribute("id", "PopularCourse");
    var mainDiv = document.createElement("div");
    mainDiv.setAttribute("class", "coursechild");
    var spanCourse = document.createElement("span");
    spanCourse.innerText = "Course";
    var br = document.createElement("br");
    var javaDiv = document.createElement("div");
    javaDiv.setAttribute("class", "Java");
    var image = document.createElement("img");
    image.setAttribute("id", "Dev");
    image.setAttribute("class", "Dev");
    image.setAttribute("src", elem.image);
    var rating = document.createElement("p");
    rating.innerText = "4.5";
    javaDiv.append(image, rating);
    var javaContent = document.createElement("div");
    javaContent.setAttribute("class", "javacontent");
    var nameh2 = document.createElement("h2");
    nameh2.setAttribute("id", "course-name");
    nameh2.innerText = elem.name;
    var contentpara1 = document.createElement("p");
    contentpara1.innerText = "TestPrepTraining";
    var contentpara2 = document.createElement("p");
    contentpara2.innerText = "Duration: 51 Hours | Mode: Online";
    var h3 = document.createElement("h3");
    h3.setAttribute("id", "course-price");
    h3.innerText = "₹ " + elem.price;
    javaContent.append(nameh2, contentpara1, contentpara2, h3);
    var courseBtn = document.createElement("div");
    courseBtn.setAttribute("class", "coursebutton");
    var expBtn = document.createElement("button");
    expBtn.setAttribute("class", "coursexplore");
    expBtn.innerText = "Explore";
    var anchor = document.createElement("a");
    anchor.setAttribute("id", "corseexpert");
    anchor.setAttribute("href", "cart.html");
    var buyBtn = document.createElement("button");
    buyBtn.setAttribute("class", "corseexpert");
    buyBtn.innerText = "Buy Now";
    buyBtn.addEventListener("click", function () {
      addToCart(index);
    });
    anchor.append(buyBtn);
    courseBtn.append(expBtn, anchor);
    mainDiv.append(spanCourse, br, javaDiv, javaContent, courseBtn);
    // popularDiv.append(mainDiv);
    document.getElementById("filtered-Data").append(mainDiv);
  });
}

// -----------------sort by price -------------------

function handleprice() {
  var filteredPrice = document.getElementById("sortprice").value;
  if (filteredPrice == "High") {
    courseData.sort(function (a, b) {
      return b.price - a.price;
    });
  } else {
    courseData.sort(function (a, b) {
      return a.price - b.price;
    });
  }
  if (filteredPrice !== "") {
    document.getElementById("viewAll-data").style.display = "none";
  } else {
    document.getElementById("viewAll-data").style.display = "block";
  }
  displayFiltereData(courseData);
}

// ------------------------signup page------------------------

// ---------------------------Login Part-----------------------------

// Login part

document.querySelector("#signup").addEventListener("click", function () {
  document.querySelector(".popup").classList.add("active");
});
document
  .querySelector(".popup .closebtn")
  .addEventListener("click", function () {
    document.querySelector(".popup").classList.remove("active");
  });

document.querySelector("#signup").addEventListener("click", function () {
  document.querySelector(".header-slider").classList.add("blur");
  document.querySelector("#navbar-container").classList.add("blur");
  document.querySelector(".header-promo").classList.add("blur");
});
document
  .querySelector(".popup .closebtn")
  .addEventListener("click", function () {
    document.querySelector(".header-slider").classList.remove("blur");
    document.querySelector(".header-promo").classList.remove("blur");
    document.querySelector("#navbar-container").classList.remove("blur");
  });

// ---------------proceed to buy----------------------------

var usermail = document.getElementById("order-mail-user").innerText;

var usrid = localStorage.getItem("Email").value;

usermail = usrid;
